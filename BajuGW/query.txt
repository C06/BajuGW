CREATE TABLE User (
    username VARCHAR(10) PRIMARY KEY,
    password VARCHAR(10) NOT NULL,
    salt TEXT UNIQUE NOT NULL,
    email TEXT NOT NULL,
    cloth_width NUMERIC,
    cloth_height NUMERIC,
    face BLOB,
    theme TEXT
);

CREATE TABLE Store (
    id INTEGER PRIMARY KEY ON CONFLICT ROLLBACK AUTOINCREMENT
);

CREATE TABLE User_Activate_Store (
    username VARCHAR(10) PRIMARY KEY REFERENCES User(username) ON DELETE CASCADE ON UPDATE CASCADE,
    store_id INTEGER PRIMARY KEY REFERENCES Store(id) ON DELETE NO ACTION ON UPDATE NO ACTION
);

CREATE TABLE Cloth (
    username VARCHAR(10) PRIMARY KEY REFERENCES User(username) ON DELETE CASCADE ON UPDATE CASCADE,
    id INTEGER PRIMARY KEY ON CONFLICT ROLLBACK AUTOINCREMENT,
    name TEXT,
    brand TEXT,
    favorite BOOLEAN,
    color TEXT,
    cloth_width NUMERIC NOT NULL,
    cloth_height NUMERIC NOT NULL,
    picture BLOB NOT NULL
);

CREATE TABLE Category (
    username VARCHAR(10) PRIMARY KEY REFERENCES User(username) ON DELETE CASCADE ON UPDATE CASCADE,
    id TEXT PRIMARY KEY
);

CREATE TABLE Cloth_Has_Category (
    username VARCHAR(10) PRIMARY KEY REFERENCES Cloth(username) ON DELETE CASCADE ON UPDATE CASCADE,
    cloth_id INTEGER PRIMARY KEY REFERENCES Cloth(id) ON DELETE CASCADE ON UPDATE CASCADE,
    category_id TEXT PRIMARY KEY REFERENCES Category(id) ON DELETE CASCADE ON UPDATE CASCADE
);